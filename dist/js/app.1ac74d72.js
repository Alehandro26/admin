(function(){"use strict";var t={3335:function(t,e,s){var a=s(7195),n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app",attrs:{id:"app"}},[e("router-view")],1)},r=[],i=s(1001),o={},c=(0,i.Z)(o,n,r,!1,null,null,null),u=c.exports,l=s(2241),d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("div",{staticClass:"home__wrapper"},[e("h2",{staticClass:"home__title"},[t._v("Авторизация")]),e("CEnter",{staticClass:"home__enter",attrs:{text:"Имя пользователя",error:t.errorEnter},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),e("CEnter",{staticClass:"home__enter",attrs:{text:"Пароль",error:t.errorEnter,type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e("button",{staticClass:"home__button button",on:{click:t.enter}},[t._v("Войти")])],1)])},p=[],m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"enter",class:{enter_error:t.error}},[e("span",{staticClass:"enter__text"},[t._v(t._s(t.text))]),"checkbox"===t.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.textInput,expression:"textInput"}],staticClass:"enter__input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.textInput)?t._i(t.textInput,null)>-1:t.textInput},on:{change:function(e){var s=t.textInput,a=e.target,n=!!a.checked;if(Array.isArray(s)){var r=null,i=t._i(s,r);a.checked?i<0&&(t.textInput=s.concat([r])):i>-1&&(t.textInput=s.slice(0,i).concat(s.slice(i+1)))}else t.textInput=n}}}):"radio"===t.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.textInput,expression:"textInput"}],staticClass:"enter__input",attrs:{type:"radio"},domProps:{checked:t._q(t.textInput,null)},on:{change:function(e){t.textInput=null}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.textInput,expression:"textInput"}],staticClass:"enter__input",attrs:{type:t.type},domProps:{value:t.textInput},on:{input:function(e){e.target.composing||(t.textInput=e.target.value)}}})])},_=[],h={props:{text:{type:String,default:""},value:{type:String,default:""},error:{type:Boolean,default:!1},type:{type:String,default:"text"}},computed:{textInput:{get(){return this.value},set(t){this.$emit("input",t)}}}},v=h,f=(0,i.Z)(v,m,_,!1,null,null,null),g=f.exports,C=(s(7658),s(306));const b=!0,k={name:"admin",password:"admin"},x=C.Z.create({baseURL:"",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});async function y(t,e){if(b)return t===k.name&&e===k.password&&(gt.push("/menu/dashboard/"),!0);try{const{data:s}=await x.post("/admin-panel/sign-in",{username:t,password:e});return localStorage.setItem("token",s.token),x.defaults.headers["Authorization"]=`Bearer ${s.token}`,gt.push("/menu/dashboard/"),s}catch{return!1}}async function w(t,e){if(b)return{activeSubscribers:10,startButtonClicks:125,totalSubscribers:54,unsubscribedUsers:17};try{const{data:s}=await x.get("/admin-panel/statistics",{params:{startDate:t,endDate:e}});return s}catch{return!1}}async function S(){if(b)return{promoCode:"PROMO2023",promoCodeLink:"https://your-promocode.com"};try{const{data:t}=await x.get("/admin-panel/settings");return t}catch{return!1}}async function I(t,e){if(!b)try{const{data:s}=await x.post("/admin-panel/settings",{promoCode:t,promoCodeLink:e});return s}catch{return!1}}x.interceptors.response.use((t=>t),(t=>(t.response&&401===t.response.status&&(localStorage.removeItem("token"),"login"!==gt.currentRoute.name&&gt.push({name:"login"})),Promise.reject(t))));var O={name:"PageLogin",components:{CEnter:g},data(){return{username:"",password:"",errorEnter:!1}},mounted(){window.addEventListener("keypress",this.enterOnKey)},beforeDestroy(){window.removeEventListener("keypress",this.enterOnKey)},methods:{async enter(){const t=await y(this.username,this.password);t||(this.errorEnter=!t)},enterOnKey(t){13===t.charCode&&this.enter()}}},Z=O,E=(0,i.Z)(Z,d,p,!1,null,null,null),P=E.exports,A=function(){var t=this,e=t._self._c;return e("div",{staticClass:"menu"},[e("CHeader"),e("div",{staticClass:"menu__wrapper"},[e("CSidebar",{staticClass:"menu__sidebar"}),e("div",{staticClass:"menu__content"},["statistics"===t.$route.params.slug?e("CStatistics"):t._e(),"settings"===t.$route.params.slug?e("CSettings"):t._e(),"dashboard"===t.$route.params.slug?e("CDashboard"):t._e()],1)],1)],1)},j=[],$=function(){var t=this,e=t._self._c;return e("aside",{staticClass:"sidebar"},[e("router-link",{staticClass:"sidebar__item",attrs:{to:"/menu/dashboard/"}},[t._v("Дешборд")]),e("router-link",{staticClass:"sidebar__item",attrs:{to:"/menu/statistics/"}},[t._v("Статистика")]),e("router-link",{staticClass:"sidebar__item",attrs:{to:"/menu/settings/"}},[t._v("Настройки")]),e("div",{staticClass:"sidebar__item",on:{click:t.logout}},[t._v("Выйти из аккаунта")])],1)},L=[],q={methods:{logout(){localStorage.removeItem("token"),this.$router.push({name:"login"})}}},D=q,B=(0,i.Z)(D,$,L,!1,null,null,null),K=B.exports,N=function(){var t=this;t._self._c;return t._m(0)},R=[function(){var t=this,e=t._self._c;return e("header",{staticClass:"header"},[e("img",{staticClass:"header__image",attrs:{src:s(4554),alt:""}}),e("div",{staticClass:"header__wrapper"},[e("span",{staticClass:"header__name"},[t._v("@bot")]),e("h3",{staticClass:"header__title"},[t._v("Свинюша")])])])}],T={},U=T,z=(0,i.Z)(U,N,R,!1,null,null,null),G=z.exports,H=function(){var t=this,e=t._self._c;return e("section",{staticClass:"statistics"},[e("header",{staticClass:"statistics__header"},[e("h2",{staticClass:"statistics__title"},[t._v("Статистика")]),e("div",{staticClass:"statistics__filter"},[e("date-pick",{staticClass:"statistics__input",attrs:{type:"text",weekdays:t.lang.weekdays,months:t.lang.months},model:{value:t.from,callback:function(e){t.from=e},expression:"from"}}),t._v("  -  "),e("date-pick",{staticClass:"statistics__input",attrs:{type:"text",weekdays:t.lang.weekdays,months:t.lang.months},model:{value:t.to,callback:function(e){t.to=e},expression:"to"}}),e("button",{staticClass:"statistics__button button",on:{click:function(e){return t.dataStatistics(t.from,t.to)}}},[t._v("Применить")])],1)]),t.statistics?e("div",{staticClass:"statistics__content"},t._l(t.list,(function(s){return e("ul",{key:s.name,staticClass:"statistics__list"},[e("li",{staticClass:"statistics__item"},[t._v(t._s(s.name))]),e("li",{staticClass:"statistics__item"},[t._v(t._s(s.value))])])})),0):t._e()])},M=[],F=s(6013),J=s.n(F),Q={components:{DatePick:J()},data(){return{from:"",to:"",lang:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],weekdays:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},statistics:null}},computed:{list(){return[{name:"Заголовок",value:"Значение"},{name:"Активные подписчики",value:this.statistics?.activeSubscribers||0},{name:"Клики на стартовую кнопку",value:this.statistics?.startButtonClicks||0},{name:"Общее количество подписчиков",value:this.statistics?.totalSubscribers||0},{name:"Оставшиеся пользователи",value:this.statistics?.unsubscribedUsers||0}]}},async created(){await this.dataStatistics()},methods:{async dataStatistics(t,e){this.statistics=t&&e?await w(t,e):await w()}}},V=Q,W=(0,i.Z)(V,H,M,!1,null,null,null),X=W.exports,Y=function(){var t=this,e=t._self._c;return t.loaded?e("section",{staticClass:"settings"},[e("h2",{staticClass:"settings__title"},[t._v("Настройки")]),e("div",{staticClass:"settings__wrapper"},[e("CEnter",{staticClass:"settings__input",attrs:{text:"Промокод"},model:{value:t.promocode,callback:function(e){t.promocode=e},expression:"promocode"}}),e("CEnter",{staticClass:"settings__input",attrs:{text:"Ссылка"},model:{value:t.link,callback:function(e){t.link=e},expression:"link"}}),e("button",{staticClass:"settings__button button",on:{click:t.sendSettings}},[t._v("Применить")])],1)]):t._e()},tt=[],et={components:{CEnter:g},data(){return{promocode:"",link:"",loaded:!1}},async mounted(){await this.getSettings(),this.loaded=!0},methods:{async getSettings(){const{promoCode:t,promoCodeLink:e}=await S();this.promocode=t||"",this.link=e||""},async sendSettings(){this.promocode&&this.link&&await I(this.promocode,this.link)}}},st=et,at=(0,i.Z)(st,Y,tt,!1,null,null,null),nt=at.exports,rt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dashboard"},[e("router-link",{staticClass:"dashboard__link",attrs:{to:"/menu/statistics/"}},[e("img",{staticClass:"dashboard__image",attrs:{src:s(8844),alt:""}}),e("span",{staticClass:"dashboard__text"},[t._v("Статистика")])]),e("router-link",{staticClass:"dashboard__link",attrs:{to:"/menu/settings/"}},[e("img",{staticClass:"dashboard__image",attrs:{src:s(7583),alt:""}}),e("span",{staticClass:"dashboard__text"},[t._v("Настройки")])])],1)},it=[],ot={},ct=ot,ut=(0,i.Z)(ct,rt,it,!1,null,null,null),lt=ut.exports,dt={components:{CHeader:G,CSidebar:K,CStatistics:X,CSettings:nt,CDashboard:lt}},pt=dt,mt=(0,i.Z)(pt,A,j,!1,null,null,null),_t=mt.exports;a.ZP.use(l.ZP);const ht=!0,vt=[{path:"/",name:"login",component:P,meta:{requiresAuth:!1,requiresGuest:!0}},{path:"/menu/:slug/",name:"menu",component:_t,meta:{requiresAuth:!0}}],ft=new l.ZP({mode:"history",base:"/admin/",routes:vt});ht||ft.beforeEach(((t,e,s)=>{t.matched.some((t=>t.meta.requiresAuth))?localStorage.getItem("token")?s():s("/"):t.matched.some((t=>t.meta.requiresGuest))&&localStorage.getItem("token")?s("/menu/dashboard"):s()}));var gt=ft;a.ZP.config.productionTip=!1,new a.ZP({router:gt,render:t=>t(u)}).$mount("#app")},7583:function(t,e,s){t.exports=s.p+"img/settings-dashboard.8a19c706.svg"},8844:function(t,e,s){t.exports=s.p+"img/statistics-dashboard.b7a6dc41.svg"},4554:function(t,e,s){t.exports=s.p+"img/avatar.56c6fe0b.jpeg"}},e={};function s(a){var n=e[a];if(void 0!==n)return n.exports;var r=e[a]={exports:{}};return t[a].call(r.exports,r,r.exports,s),r.exports}s.m=t,function(){var t=[];s.O=function(e,a,n,r){if(!a){var i=1/0;for(l=0;l<t.length;l++){a=t[l][0],n=t[l][1],r=t[l][2];for(var o=!0,c=0;c<a.length;c++)(!1&r||i>=r)&&Object.keys(s.O).every((function(t){return s.O[t](a[c])}))?a.splice(c--,1):(o=!1,r<i&&(i=r));if(o){t.splice(l--,1);var u=n();void 0!==u&&(e=u)}}return e}r=r||0;for(var l=t.length;l>0&&t[l-1][2]>r;l--)t[l]=t[l-1];t[l]=[a,n,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.p="/admin/"}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var n,r,i=a[0],o=a[1],c=a[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(c)var l=c(s)}for(e&&e(a);u<i.length;u++)r=i[u],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(l)},a=self["webpackChunkadmin"]=self["webpackChunkadmin"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(3335)}));a=s.O(a)})();
//# sourceMappingURL=app.1ac74d72.js.map